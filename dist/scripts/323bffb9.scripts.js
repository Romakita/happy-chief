"use strict";angular.module("happyChiefApp",["ngCookies","ngResource","ngSanitize","ngRoute","mm.foundation"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"RecipeListCtrl"}).when("/recipes/:page?/:limit?/:search?",{templateUrl:"views/main.html",controller:"RecipeListCtrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$route","$location",function(a,b,c){console.log("run app"),a.$on("$viewContentLoaded",function(){console.log("$viewContentLoaded")});var d=c.path;c.path=function(e,f){if(f===!1)var g=b.current,h=a.$on("$locationChangeSuccess",function(){b.current=g,h()});return d.apply(c,[e])}}]),angular.module("happyChiefApp").service("Recipe",["$http",function(a){return{get:function(b){return a.get("/recipes/"+b)},save:function(b){return b._id?a.put("/recipes/"+b._id,b):a.post("/recipes",b)},remove:function(b){return a.delete("/recipes/"+b)},getList:function(b){return a({url:"/recipes",method:"GET",params:b})}}}]),angular.module("happyChiefApp").controller("RecipeCardController",["$scope","$attrs","$parse","$interpolate","$routeParams","$location","$modal",function(a,b,c,d,e,f){var g=this;if("undefined"!=typeof b.sortDefault){var h=b.sortDefault.split(" ");a.sortField=h[0],a.sortOrder=2==h.length?h[1]:"asc"}else a.sortField=!1,a.sortOrder=!1;a.paginations="undefined"!=typeof b.paginations?b.paginations.split(","):[20,50,100],a.totalItems=0,a.currentPage=e.page?e.page:1,a.maxSize=5,a.itemsPerPage=e.limit?e.limit:20,a.skip=(a.currentPage-1)*a.itemsPerPage,a.hidePagination=!0,a.search=e.search?e.search:"",a.onChangeItemsPerPage=function(b){a.itemsPerPage=b,a.currentPage=1,g.setPath(),g.loadList()},this.loadList=function(){var b={limit:a.itemsPerPage,skip:a.skip,search:a.search,sortOrder:a.sortOrder,sortField:a.sortField};b=angular.extend(b,a.parameters||{}),a.loader(b).success(function(b){console.log(b),a.list=b.data,a.totalItems=b.maxLength,a.showPagination=b.maxLength>a.itemsPerPage})},this.setPath=function(){f.path(a.href.replace("#","")+"/"+a.currentPage+"/"+a.itemsPerPage+(a.search?"/"+a.search:""),!1)},a.onSelectPage=function(b){a.currentPage=b,a.skip=(a.currentPage-1)*a.itemsPerPage,g.setPath(),g.loadList()},a.$watch("parameters",function(){g.loadList()})}]).directive("recipeCard",["$parse",function(){return{restrict:"EA",controller:"RecipeCardController",templateUrl:"views/recipe/card.html",transclude:!0,scope:{href:"@",loader:"=",parameters:"="},replace:!0,link:function(a,b,c){a.showCreate="undefined"==typeof c.create?!0:c.create}}}]),angular.module("happyChiefApp").controller("RecipeListCtrl",["$scope","Recipe",function(a,b){console.log("Recipes list"),a.loader=function(a){return console.log(a),b.getList(a).error(function(a){console.log(a)})}}]);